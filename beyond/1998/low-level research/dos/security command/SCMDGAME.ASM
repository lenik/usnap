
SC_Play         proc
	push bx
	push cx
        push dx
	push si
	push di               ; This DI was modified to SC_Play by INT2F Main Proc
	lea cx, SC_GameTable  ; for SearchParameter
	push cx               ;
	call GetParam         ; So This Proc will Make Nested Calls without DI Reassigned.
        or cx, cx
        jz SC_GameList
	mov si, bx            ; GetParam Return Parameter in DS:BX
	call ToUpper          ; and a Length of Parameter in CX
	dec cl                ; Decrease Space
	mov ch, 2             ; Every Game String has 2 bytes Entry Address
	call SearchParameter
	jc PlayGame
	push dx
	lea dx, NoGameFound
	call DisplayCodeString
	pop dx
	jmp short PlayExit
SC_GameList:
        pop si                  ; bx -> SC_GameTable
        mov cx, cs: SC_GameCount
        xor bx, bx
SC_GameList_Word:
        or cx, cx
        jz PlayExit
        mov dx, si
        call DisplayCodeBstr
        lea dx, TabChar
        call DisplayCodeString

        mov bl, byte ptr cs: [si]
        add si, bx
        inc si                  ; byte: count

        mov ax, 0FFFFh          ; show game tip-help magicword
        call cs: [si]           ; game entry with AX = 0FFFFh
        inc si
        inc si

        dec cx
        jmp short SC_GameList_Word
PlayGame:
	call cs: [di]         ; ->sc_play
PlayExit:
	pop di
	pop si
        pop dx
	pop cx
	pop bx
	ret
SC_Play         endp

SC_PlayGuess    proc
        cmp ax, 0FFFFh
        jnz GuessBegin
	push dx
        lea dx, GuessTip
	call DisplayCodeString
	pop dx
        ret
GuessBegin:
	ret
SC_PlayGuess    endp

SC_PlayMine     proc
        cmp ax, 0FFFFh
        jnz MineBegin
	push dx
        lea dx, MineTip
	call DisplayCodeString
	pop dx
	ret
MineBegin:
        ret
SC_PlayMine     endp

SC_Rand         proc    ; Return DX = RandNum
	push ds
	xor dx, dx
	mov ds, dx
	mov dx, ds: [46ch]     ; 0:46CH = Daily Counter (DWord)
	pop ds
	add dh, dl
	add RandSeed, dx
	mov dx, RandSeed
	ret
	RandSeed      dw 0
SC_Rand         endp

NoGameFound     db 'No Game Found.$'
GuessTip        db 'guess a number generated by computer.', 0dh, 0ah, '$'
MineTip         db 'found out all the mines!', 0dh, 0ah, '$'

SC_GameCount    dw 2
SC_GameTable    Label
	db 5, 'GUESS'
		dw SC_PlayGuess
	db 4, 'MINE'
		dw SC_PlayMine
